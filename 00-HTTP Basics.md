### Μάθημα: Βασικά του HTTP
**Περιγραφή**: Ο στόχος είναι να εντοπιστεί ο τύπος αιτήματος (POST ή GET) και ο "μαγικός αριθμός" (magic number) που παράγεται από κρυφό πεδίο εισόδου σε μια φόρμα HTML.

#### Βήματα
1. **Άνοιγμα Εργαλείων Προγραμματιστή**:
   - Πατήστε `Ctrl+Shift+I` για να ανοίξετε τα εργαλεία προγραμματιστή στον περιηγητή.
   - Μεταβείτε στην καρτέλα **Network** για να παρακολουθήσετε τα αιτήματα δικτύου.

2. **Ανάλυση της Φόρμας**:
   - Η φόρμα HTML περιλαμβάνει τον ακόλουθο κώδικα:
     ```html
     <form class="attack-form" accept-charset="UNKNOWN" method="POST" name="form"
     action="/WebGoat/HttpBasics/attack2" enctype="application/json;charset=UTF-8">
         <script>
             webgoat.customjs.assignRandomVal = function () {
                 var x = Math.floor((Math.random() * 100) + 1);
                 document.getElementById("magic_num").value = x;
             };
             webgoat.customjs.assignRandomVal();
         </script>
         <input type="hidden" name="magic_num" id="magic_num" value="69">
         <table>
             <tbody><tr>
                 <td>Was the HTTP command a POST or a GET:</td>
                 <td><input name="answer" value="" type="TEXT"></td>
                 <td></td>
             </tr>
             <tr>
                 <td>What is the magic number:</td>
                 <td>
                     <input name="magic_answer" value="" type="TEXT">
                     <input name="SUBMIT" value="Go!" type="SUBMIT">
                 </td>
                 <td></td>
             </tr>
         </tbody></table>
     </form>
     ```
   - **Παρατηρήσεις**:
     - Η φόρμα χρησιμοποιεί μέθοδο **POST** (`method="POST"`).
     - Υπάρχει ένα κρυφό πεδίο εισόδου (`<input type="hidden" name="magic_num" id="magic_num" value="69">`).
     - Ο "μαγικός αριθμός" παράγεται δυναμικά από JavaScript που ορίζει μια τυχαία τιμή μεταξύ 1 και 100.

3. **Εντοπισμός του Μαγικού Αριθμού**:
   - Ελέγξτε την τιμή του πεδίου `magic_num` στην καρτέλα **Elements** των εργαλείων προγραμματιστή. Η τιμή ενημερώνεται από το JavaScript.
   - Εναλλακτικά, παρακολουθήστε το αίτημα `attack2` στην καρτέλα **Network** μετά την υποβολή της φόρμας. Η τιμή του `magic_num` εμφανίζεται στα **Form Data** (π.χ., μετά από αποτυχημένη προσπάθεια).
   - Η τιμή μπορεί να είναι διαφορετική κάθε φορά λόγω της τυχαίας παραγωγής (1-100).

4. **Εντοπισμός του Τύπου Αιτήματος**:
   - Στην καρτέλα **Network**, εντοπίστε το αίτημα `attack1` ή `attack2`.
   - Στις **Headers** του αιτήματος, ο τύπος αιτήματος αναφέρεται ως **POST**.
   - Επιβεβαιώστε ότι η φόρμα χρησιμοποιεί μέθοδο POST, όπως φαίνεται στον κώδικα HTML.

5. **Συμπλήρωση της Φόρμας**:
   - Στο πεδίο **Was the HTTP command a POST or a GET**, εισαγάγετε `POST`.
   - Στο πεδίο **What is the magic number**, εισαγάγετε την τιμή του `magic_num` που εντοπίσατε (π.χ., 69 ή οποιαδήποτε άλλη τυχαία τιμή από το JavaScript).
   - Πατήστε **Go!** για να υποβάλετε τη φόρμα.

#### Παράδειγμα Εικόνας
![WebGoat Magic Number](images/webgoat_magic_num.png)
- Η εικόνα δείχνει τη φόρμα με τα πεδία εισόδου και το κουμπί υποβολής.

---

## Συμβουλές για την Εκμάθηση και την Ανάλυση

### Συμβουλές Εκμάθησης
1. **Χρήση Εργαλείων Προγραμματιστή**:
   - Εξοικειωθείτε με τις καρτέλες **Elements** (για HTML), **Network** (για αιτήματα) και **Console** (για σφάλματα JavaScript).
   - Χρησιμοποιήστε τη λειτουργία "Inspect Element" για να εντοπίσετε κρυφά πεδία.
2. **Ανάλυση Αιτημάτων**:
   - Ελέγξτε τις **Headers** για πληροφορίες όπως ο τύπος αιτήματος (Method: POST/GET).
   - Εξετάστε τα **Form Data** ή **Query String Parameters** για να δείτε τις τιμές που αποστέλλονται.
3. **Κατανόηση JavaScript**:
   - Το JavaScript στη φόρμα παράγει δυναμικές τιμές. Ελέγξτε τη λογική του (π.χ., τυχαίοι αριθμοί) για να προβλέψετε την έξοδο.
   - Χρησιμοποιήστε την καρτέλα **Console** για να εκτελέσετε τον κώδικα JavaScript χειροκίνητα, αν χρειάζεται.

### Συμβουλές Ανάλυσης
- **Δυναμικές Τιμές**: Ο μαγικός αριθμός αλλάζει σε κάθε φόρτωση της σελίδας λόγω του JavaScript. Ελέγξτε την τρέχουσα τιμή πριν την υποβολή.
- **Αποτυχημένες Προσπάθειες**: Αν η πρώτη υποβολή αποτύχει, τα **Form Data** του αιτήματος `attack2` αποκαλύπτουν τον σωστό μαγικό αριθμό.
- **Εναλλακτικές Μέθοδοι**:
  - Εκτελέστε τη συνάρτηση `webgoat.customjs.assignRandomVal()` στην κονσόλα για να δείτε την παραγόμενη τιμή.
  - Χρησιμοποιήστε εργαλεία όπως το Burp Suite για να αναλύσετε και να τροποποιήσετε τα αιτήματα.

---

## Επιπρόσθετοι Πόροι
- **OWASP HTTP Basics**: https://owasp.org/www-community/attacks/ (για γενικές πληροφορίες σχετικά με το HTTP).
- **WebGoat Tutorial**: Εξερευνήστε το WebGoat (https://owasp.org/www-project-webgoat/) για πρακτικές ασκήσεις.
- **MDN Web Docs - HTTP**: https://developer.mozilla.org/en-US/docs/Web/HTTP (για τεκμηρίωση του HTTP).
- **PortSwigger Web Security Academy**: https://portswigger.net/web-security (για ασκήσεις HTTP και άλλες ευπάθειες).

**Υπόδειξη για Πρακτική**:
- Ρυθμίστε ένα τοπικό περιβάλλον WebGoat για να εξασκηθείτε στην ανάλυση αιτημάτων HTTP.
- Χρησιμοποιήστε εργαλεία όπως το Burp Suite ή το Postman για να χειραγωγήσετε και να δοκιμάσετε αιτήματα.
- Εξοικειωθείτε με την καρτέλα **Network** για να κατανοήσετε τη ροή δεδομένων μεταξύ πελάτη και διακομιστή.

## WebGoat: HTTP Proxies

1. **Εγκατάσταση και Ρύθμιση του ZAP**
   - Κατεβάστε το OWASP ZAP από την επίσημη ιστοσελίδα του.
   - Εγκαταστήστε το ZAP στον υπολογιστή σας ακολουθώντας τις οδηγίες εγκατάστασης.
   - Ρυθμίστε τον περιηγητή σας ώστε να χρησιμοποιεί το ZAP ως μεσολαβητή (proxy). Συνήθως, αυτό γίνεται ορίζοντας το proxy στις ρυθμίσεις του περιηγητή στη διεύθυνση `localhost` και τη θύρα `8080` (ή όποια θύρα έχετε ορίσει στο ZAP).
   - Εκκινήστε το ZAP και βεβαιωθείτε ότι είναι έτοιμο να δεχτεί κίνηση από τον περιηγητή.

2. **Παρεμβολή Αιτήματος**
   - Όταν ένα αίτημα παρεμποδίζεται από το ZAP, θα εμφανιστεί στην καρτέλα **Break** του ZAP. Το αίτημα θα μοιάζει με την παρακάτω εικόνα:
     
     ![](images/webgoat_http_proxy.png)
   - Το ZAP σας επιτρέπει να δείτε και να επεξεργαστείτε το αίτημα πριν αυτό προωθηθεί στον διακομιστή.

3. **Τροποποίηση του Αιτήματος**

   - Βεβαιωθείτε ότι το αίτημα έχει οριστεί σωστά ως **POST** και περιλαμβάνει τη σωστή διαδρομή και παράμετρο:
     ```
     /WebGoat/HttpProxies/intercept-request?changeMe=Requests%20are%20tampered%20easily HTTP/1.1
     ```
   - Ελέγξτε προσεκτικά τις κεφαλίδες και το σώμα του αιτήματος για να διασφαλίσετε ότι είναι σωστά.

4. **Προώθηση του Τροποποιημένου Αιτήματος**
   - Αφού ολοκληρώσετε την τροποποίηση, πατήστε το κουμπί **Play** στο ZAP για να προωθήσετε το αίτημα στον διακομιστή.

## Σημειώσεις
- Το μάθημα αυτό στο WebGoat έχει σκοπό να σας διδάξει πώς τα αιτήματα HTTP μπορούν να τροποποιηθούν εύκολα, υπογραμμίζοντας τη σημασία της σωστής επικύρωσης δεδομένων από την πλευρά του διακομιστή.
- Πάντα να δοκιμάζετε τέτοιες ασκήσεις σε ελεγχόμενα περιβάλλοντα, όπως το WebGoat, και ποτέ σε πραγματικές εφαρμογές χωρίς άδεια.
